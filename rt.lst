  Thu Nov 14 15:23:37 2002                                                                                               Page    1







               2500 A.D. 6502 Macro Assembler  -  Version 5.02b
               ------------------------------------------------

                       Input  Filename : rt.asm
                       Output Filename : rt.obj
                       Listing Has Been Relocated                               


    1                     		.linklist         
    2                     		.symbols
    3                     		.debug	asm       
    4                     		.options dch
    5                     		.list on  
    6  00000000             		
    7                     	;==========================================================================
    8                     	;			c6502s 的函数
    9                     	;==========================================================================
   10                     		.extern ___div_char                      
   11                     		.extern ___div_int                       
   12                     		.extern ___div_long                      
   13                     		.extern ___mult_char                     
   14                     		.extern ___mult_int                      
   15                     		.extern ___mult_long                     
   16                     		.extern	__add_long                       
   17                     		.extern	__and_long                       
   18                     		.extern __banked_function_call           
   19                     		.extern __cmp_float                      
   20                     		.extern __cmp_int                        
   21                     		.extern __cmp_long                       
   22                     		.extern	__div_char                       
   23                     		.extern	__div_int                        
   24                     		.extern	__div_long                       
   25                     		.extern	__exts_oper1_char_to_float       
   26                     		.extern	__exts_oper1_char_to_int         
   27                     		.extern	__exts_oper1_char_to_long        
   28                     		.extern	__exts_oper1_int_to_float        
   29                     		.extern	__exts_oper1_int_to_long         
   30                     		.extern __exts_oper1_long_to_float       
   31                     		.extern __exts_oper2_char_to_float       
   32                     		.extern __exts_oper2_char_to_int         
   33                     		.extern __exts_oper2_char_to_long        
   34                     		.extern __exts_oper2_int_to_float        
   35                     		.extern __exts_oper2_int_to_long         
   36                     		.extern	__exts_oper2_long_to_float       
   37                     		.extern	__indirect_call                  
   38                     		.extern __ld_oper1_conversion_store_addr 
   39                     		.extern __ld_oper1_temp_store_addr       
   40                     		.extern __ld_oper2_conversion_store_addr 
   41                     		.extern __ld_oper2_temp_store_addr       
   42                     		.extern	__mod_char                       
   43                     		.extern	__mod_int                        
   44                     		.extern	__mod_long                       
   45                     		.extern	__mult_char                      
   46                     		.extern	__mult_int                       
  Thu Nov 14 15:23:37 2002                                                                                               Page    2




   47                     		.extern	__mult_long                      
   48                     		.extern	__neg_as_long                    
   49                     		.extern	__neg_float                      
   50                     		.extern __neg_int                        
   51                     		.extern __neg_long                       
   52                     		.extern __neg_oper2_int                  
   53                     		.extern __not_long                       
   54                     		.extern __oper1_float_to_char            
   55                     		.extern __oper1_float_to_int             
   56                     		.extern	__oper1_float_to_long            
   57                     		.extern	__oper1_long_to_char             
   58                     		.extern __oper1_long_to_int              
   59                     		.extern __oper2_float_to_char            
   60                     		.extern __oper2_float_to_int             
   61                     		.extern __oper2_float_to_long            
   62                     		.extern	__oper2_long_to_char             
   63                     		.extern	__oper2_long_to_int              
   64                     		.extern	__or_long                        
   65                     		.extern	__s_sr_char                      
   66                     		.extern	__s_sr_int                       
   67                     		.extern	__s_sr_long                      
   68                     		.extern	__scale_oper1_ptr3               
   69                     		.extern	__scale_oper2_ptr3               
   70                     		.extern __sl_char                        
   71                     		.extern __sl_int                         
   72                     		.extern __sl_long                        
   73                     		.extern __store_char_funct_arg           
   74                     		.extern __store_float                    
   75                     		.extern __store_float_funct_arg          
   76                     		.extern	__store_float_oper2_indirect     
   77                     		.extern	__store_int_funct_arg            
   78                     		.extern __store_long                     
   79                     		.extern __store_long_funct_arg           
   80                     		.extern __store_long_oper2_indirect      
   81                     		.extern __sub_long                       
   82                     		.extern	__switch_comparison              
   83                     		.extern	__u_sr_char                      
   84                     		.extern	__u_sr_int                       
   85                     		.extern	__u_sr_long                      
   86                     		.extern	__uns_div_char                   
   87                     		.extern	__uns_div_int                    
   88                     		.extern	__uns_div_long                   
   89                     		.extern	__uns_mod_char                   
   90                     		.extern __uns_mod_int                    
   91                     		.extern __uns_mod_long                   
   92                     		.extern __uns_mult_char                  
   93                     		.extern __uns_mult_int                   
   94                     		.extern __uns_mult_long                  
   95                     		.extern __uns_oper1_char_to_float        
   96                     		.extern	__uns_oper1_char_to_long         
   97                     		.extern	__uns_oper1_int_to_float         
   98                     		.extern __uns_oper1_int_to_long          
   99                     		.extern __uns_oper1_long_to_float        
  100                     		.extern __uns_oper2_char_to_float        
  101                     		.extern __uns_oper2_char_to_long         
  102                     		.extern	__uns_oper2_int_to_float         
  103                     		.extern	__uns_oper2_int_to_long          
  Thu Nov 14 15:23:37 2002                                                                                               Page    3




  104                     		.extern	__uns_oper2_long_to_float        
  105                     		.extern	__unscale_oper1_ptr3             
  106                     		.extern	__xchg_oper1_int_and_oper2_int   
  107                     		.extern	__xor_long                       
  108                     		.extern	__zero_or_one_char               
  109                     		.extern	__zero_or_one_int                
  110                     		.extern	__zero_or_one_long               
  111                     	
  112                     	
  113                     	;==========================================================================
  114                     	;			c6502m 的函数
  115                     	;==========================================================================
  116                     		.extern	___add_float                     
  117                     		.extern	___cmp_float                     
  118                     		.extern	___div_float                     
  119                     		.extern	___float_to_long                 
  120                     		.extern	___long_to_float                 
  121                     		.extern	___mult_float                    
  122                     		.extern	__add_float                      
  123                     		.extern	__cmp_float_interface            
  124                     		.extern	__div_float                      
  125                     		.extern	__float_to_long_interface        
  126                     		.extern	__long_to_float_interface        
  127                     		.extern	__mult_float                     
  128                     		.extern	__sub_float                      
  129  00000000             	 
  130                     	;==========================================================================
  131                     	;			c6502p 的函数
  132                     	;==========================================================================
  133                     		.extern	___fraction_table                
  134                     		.extern	___power_table                   
  135                     	
  136                     	;-----------------------------------------------------------------	
  137                     	;			固定 runtime 中各变量的地址	
  138                     	;-----------------------------------------------------------------	
  139                     		.extern	__FUNCTION_RET_ADDR
  140                     		.extern __OPER1_TEMP_STORE
  141                     		.extern __OPER1_CONVERSION_STORE
  142                     		.extern	__OPER2_TEMP_STORE
  143                     		.extern __OPER2_CONVERSION_STORE
  144                     	
  145                     	;-----------------------------------------------------------------	
  146                     	;			runtime 中各变量的地址的使用	
  147                     	;-----------------------------------------------------------------	
  148                     		;只供  runtime_program   各函数定位用
  149                     		program:		.section
  150                     		.program		
  151  00015000             	rt_dummy:	
  152  50000000 AD 00 00    		lda	__FUNCTION_RET_ADDR
  153  50030003 AD 08 00    		lda	__OPER1_TEMP_STORE
  154  50060006 AD 18 00    		lda	__OPER2_TEMP_STORE
  155  50090009 AD 10 00    		lda	__OPER1_CONVERSION_STORE
  156  500C000C AD 20 00    		lda	__OPER2_CONVERSION_STORE
  157                     	
  158                     	;==========================================================================
  159                     	;			c6502s 的函数
  160                     	;==========================================================================
  Thu Nov 14 15:23:37 2002                                                                                               Page    4




  161                     		program:		section
  162                     		.program		
  163                     	
  164  500F000F 20 00 D0    		jsr     ___div_char                      
  165  50120012 20 32 D0    		jsr     ___div_int                       
  166  50150015 20 A8 D0    		jsr     ___div_long                      
  167  50180018 20 84 D1    		jsr     ___mult_char                     
  168  501B001B 20 A2 D1    		jsr     ___mult_int                      
  169  501E001E 20 01 D2    		jsr     ___mult_long                     
  170  50210021 20 9D D2    		jsr    	__add_long                       
  171  50240024 20 CA D2    		jsr    	__and_long                       
  172  50270027 20 F6 D2    		jsr     __banked_function_call           
  173  502A002A 20 1A D3    		jsr     __cmp_float                      
  174  502D002D 20 40 D3    		jsr     __cmp_int                        
  175  50300030 20 62 D3    		jsr     __cmp_long                       
  176  50330033 20 9B D3    		jsr    	__div_char                       
  177  50360036 20 EF D3    		jsr    	__div_int                        
  178  50390039 20 35 D4    		jsr    	__div_long                       
  179  503C003C 20 98 D4    		jsr     __exts_oper1_char_to_float       
  180  503F003F 20 9E D4    		jsr     __exts_oper1_char_to_int         
  181  50420042 20 A9 D4    		jsr     __exts_oper1_char_to_long        
  182  50450045 20 C0 D4    		jsr    	__exts_oper1_int_to_float        
  183  50480048 20 C6 D4    		jsr    	__exts_oper1_int_to_long         
  184  504B004B 20 E1 D4    		jsr     __exts_oper1_long_to_float       
  185  504E004E 20 06 D5    		jsr     __exts_oper2_char_to_float       
  186  50510051 20 0C D5    		jsr     __exts_oper2_char_to_int         
  187  50540054 20 19 D5    		jsr     __exts_oper2_char_to_long        
  188  50570057 20 34 D5    		jsr     __exts_oper2_int_to_float        
  189  505A005A 20 3A D5    		jsr     __exts_oper2_int_to_long         
  190  505D005D 20 57 D5    		jsr    	__exts_oper2_long_to_float       
  191  50600060 20 72 D5    		jsr    	__indirect_call                  
  192  50630063 20 86 D5    		jsr     __ld_oper1_conversion_store_addr 
  193  50660066 20 96 D5    		jsr     __ld_oper1_temp_store_addr       
  194  50690069 20 A6 D5    		jsr     __ld_oper2_conversion_store_addr 
  195  506C006C 20 B6 D5    		jsr     __ld_oper2_temp_store_addr       
  196  506F006F 20 C6 D5    		jsr    	__mod_char                       
  197  50720072 20 DC D5    		jsr    	__mod_int                        
  198  50750075 20 04 D6    		jsr    	__mod_long                       
  199  50780078 20 5B D6    		jsr     __mult_char                      
  200  507B007B 20 AF D6    		jsr     __mult_int                       
  201  507E007E 20 F5 D6    		jsr     __mult_long                      
  202  50810081 20 52 D7    		jsr    	__neg_as_long                    
  203  50840084 20 80 D7    		jsr    	__neg_float                      
  204  50870087 20 A6 D7    		jsr     __neg_int                        
  205  508A008A 20 B4 D7    		jsr     __neg_long                       
  206  508D008D 20 E1 D7    		jsr     __neg_oper2_int                  
  207  50900090 20 F1 D7    		jsr     __not_long                       
  208  50930093 20 1D D8    		jsr     __oper1_float_to_char            
  209  50960096 20 25 D8    		jsr     __oper1_float_to_int             
  210  50990099 20 35 D8    		jsr    	__oper1_float_to_long            
  211  509C009C 20 5A D8    		jsr    	__oper1_long_to_char             
  212  509F009F 20 5F D8    		jsr     __oper1_long_to_int              
  213  50A200A2 20 6C D8    		jsr     __oper2_float_to_char            
  214  50A500A5 20 78 D8    		jsr     __oper2_float_to_int             
  215  50A800A8 20 8A D8    		jsr     __oper2_float_to_long            
  216  50AB00AB 20 A5 D8    		jsr    	__oper2_long_to_char             
  217  50AE00AE 20 AE D8    		jsr    	__oper2_long_to_int              
  Thu Nov 14 15:23:37 2002                                                                                               Page    5




  218  50B100B1 20 BD D8    		jsr    	__or_long                        
  219  50B400B4 20 E9 D8    		jsr     __s_sr_char                      
  220  50B700B7 20 0B D9    		jsr     __s_sr_int                       
  221  50BA00BA 20 3F D9    		jsr     __s_sr_long                      
  222  50BD00BD 20 DF D9    		jsr    	__scale_oper1_ptr3               
  223  50C000C0 20 F3 D9    		jsr    	__scale_oper2_ptr3               
  224  50C300C3 20 09 DA    		jsr     __sl_char                        
  225  50C600C6 20 1A DA    		jsr     __sl_int                         
  226  50C900C9 20 3D DA    		jsr     __sl_long                        
  227  50CC00CC 20 AA DA    		jsr     __store_char_funct_arg           
  228  50CF00CF 20 C1 DA    		jsr     __store_float                    
  229  50D200D2 20 C4 DA    		jsr     __store_float_funct_arg          
  230  50D500D5 20 C7 DA    		jsr    	__store_float_oper2_indirect     
  231  50D800D8 20 CA DA    		jsr    	__store_int_funct_arg            
  232  50DB00DB 20 E6 DA    		jsr     __store_long                     
  233  50DE00DE 20 FC DA    		jsr     __store_long_funct_arg           
  234  50E100E1 20 19 DB    		jsr     __store_long_oper2_indirect      
  235  50E400E4 20 2F DB    		jsr     __sub_long                       
  236  50E700E7 20 5C DB    		jsr    	__switch_comparison              
  237  50EA00EA 20 E1 DB    		jsr    	__u_sr_char                      
  238  50ED00ED 20 F2 DB    		jsr    	__u_sr_int                       
  239  50F000F0 20 0E DC    		jsr     __u_sr_long                      
  240  50F300F3 20 7B DC    		jsr     __uns_div_char                   
  241  50F600F6 20 80 DC    		jsr     __uns_div_int                    
  242  50F900F9 20 83 DC    		jsr    	__uns_div_long                   
  243  50FC00FC 20 AB DC    		jsr    	__uns_mod_char                   
  244  50FF00FF 20 B1 DC    		jsr     __uns_mod_int                    
  245  51020102 20 C8 DC    		jsr     __uns_mod_long                   
  246  51050105 20 EF DC    		jsr     __uns_mult_char                  
  247  51080108 20 F4 DC    		jsr     __uns_mult_int                   
  248  510B010B 20 F7 DC    		jsr     __uns_mult_long                  
  249  510E010E 20 19 DD    		jsr     __uns_oper1_char_to_float        
  250  51110111 20 1F DD    		jsr    	__uns_oper1_char_to_long         
  251  51140114 20 32 DD    		jsr    	__uns_oper1_int_to_float         
  252  51170117 20 38 DD    		jsr     __uns_oper1_int_to_long          
  253  511A011A 20 4F DD    		jsr     __uns_oper1_long_to_float        
  254  511D011D 20 52 DD    		jsr     __uns_oper2_char_to_float        
  255  51200120 20 58 DD    		jsr     __uns_oper2_char_to_long         
  256  51230123 20 6F DD    		jsr    	__uns_oper2_int_to_float         
  257  51260126 20 75 DD    		jsr    	__uns_oper2_int_to_long          
  258  51290129 20 8C DD    		jsr    	__uns_oper2_long_to_float        
  259  512C012C 20 8F DD    		jsr     __unscale_oper1_ptr3             
  260  512F012F 20 A7 DD    		jsr     __xchg_oper1_int_and_oper2_int   
  261  51320132 20 B8 DD    		jsr     __xor_long                       
  262  51350135 20 E4 DD    		jsr    	__zero_or_one_char               
  263  51380138 20 EE DD    		jsr    	__zero_or_one_int                
  264  513B013B 20 02 DE    		jsr		__zero_or_one_long
  265  0001513E             		
  266                     	;==========================================================================
  267                     	;			c6502m 的函数
  268                     	;==========================================================================
  269  513E013E 20 29 DE    		jsr    	___add_float                     
  270  51410141 20 39 E0    		jsr     ___cmp_float                     
  271  51440144 20 00 E1    		jsr     ___div_float                     
  272  51470147 20 82 E2    		jsr     ___float_to_long                 
  273  514A014A 20 1D E3    		jsr     ___long_to_float                 
  274  514D014D 20 B7 E3    		jsr    	___mult_float                    
  Thu Nov 14 15:23:37 2002                                                                                               Page    6




  275  51500150 20 17 E5    		jsr    	__add_float                      
  276  51530153 20 1C E5    		jsr    	__cmp_float_interface            
  277  51560156 20 20 E5    		jsr     __div_float                      
  278  51590159 20 24 E5    		jsr     __float_to_long_interface        
  279  515C015C 20 28 E5    		jsr     __long_to_float_interface        
  280  515F015F 20 2C E5    		jsr    	__mult_float                     
  281  51620162 20 30 E5    		jsr    	__sub_float                      
  282  00015165             	 
  283                     	;==========================================================================
  284                     	;			c6502p 的函数
  285                     	;==========================================================================
  286  51650165 20 6A 73    		jsr    	___fraction_table                
  287  51680168 20 B2 73    		jsr    	___power_table                   
  288                     	
  289                     	
  290                     	
  291                     	
  292                     	


             Lines Assembled : 292                  Errors : 0


